<!DOCTYPE html>
<html lang="en"><meta charset="utf-8"><meta name="generator" content="Hugo 0.101.0" /><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<meta name="color-scheme" content="light dark">
<meta name="supported-color-schemes" content="light dark"><title>procfs/sysfs&nbsp;&ndash;&nbsp;blog</title><link rel="stylesheet" href="/css/core.min.44560be6020e22e3be17c931179ad2ce63ad254bd9d403b57f3ecbb578d0c914e0b57e928ce61ec7db865296ee0e2d62.css" integrity="sha384-RFYL5gIOIuO&#43;F8kxF5rSzmOtJUvZ1AO1fz7LtXjQyRTgtX6SjOYex9uGUpbuDi1i"><meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="procfs/sysfs" /><body>
    <div class="base-body"><section id="header" class="site header">
    <div class="header wrap"><span class="header left-side"><a class="site home" href="/"><span class="site name">blog</span></a></span>
        <span class="header right-side"><div class="nav wrap"><nav class="nav"><a class="nav item" href="/categories/">Categories</a><a class="nav item" href="/tags/">Tags</a><a class="nav item" href="/about/">About</a></nav></div></span></div><div class="site slogan"><span class="title">Updating once and forgetting</span></div></section><div id="content"><div class="article-container"><section class="article header">
    <h1 class="article title">procfs/sysfs</h1></section><article class="article markdown-body"><p>procfs and sysfs are both pseudo filesystems located in the root directory of the Unix FS heirarchy. They contain files which act as a <em>window</em> to the kernel and allows user-land processes to see and change important system information.
Upon inspection (if you wrote the command <code>$ ls -al /proc</code> on a Unix system) you would notice that all files are 0 in size. This is due to the <em>window</em> aspect, one a user-land process reads/opens one of these files, it is at that moment the kernel writes that information to the file, hence the analogy. Imagine you are out shopping, where the shops changed their items every second, and only when you look through the window will the shop owner place their items in view for you to see, saving the shop owner a lot of energy if you only decide to look once every minute.
There are files containing singular process information as well as system wide information, and procfs uses symlinks to allow processes to automatically see stats releated to the caller, without the caller making extra effort.</p>
<p>sysfs contains files which interact with the kernel and allows user-land processes to modify kernel parameters without entering the kernel themselves. Processes can write to these files and the kernel will update the parameters accordingly within the kernel.
<full sysfs info here once completed research></p>
<p>The aim of my bachelor project is to create a filesystem using FUSE which mirrors procfs and sysfs for a distributed setting. To begin planning, it is important to realise which filesystem operations I will actually need to implement, and which ones I should leave out.
After checking the <a href="https://github.com/torvalds/linux/blob/6f0d349d922ba44e4348a17a78ea51b7135965b1/fs/proc/generic.c"target="_blank">linux/fs/proc/generic file</a> (which contains the main filesystem operations for procfs on the master branch) I found that these were the ones given to the VFS by procfs:</p>
<ul>
<li>getattrb</li>
<li>readdir</li>
<li>llseek</li>
<li>read</li>
<li>lookup</li>
<li>setattrb</li>
<li>create</li>
<li>symlink</li>
<li>mkdir</li>
<li>open</li>
<li>release</li>
<li>remove</li>
</ul>
<p>Apart from llseek and the remove operation, all of these methods are offered by the FUSE api to be used within a new FS. Due to my bachelor project <em>mirroring</em> procfs, operations which modify files/directories in any way should not be implemented, thus here are the final operations which I must implement:</p>
<ul>
<li>getattrb</li>
<li>readdir</li>
<li>read</li>
<li>lookup</li>
<li>open
test</li>
</ul>
</article><section class="article labels"><a class="category" href=/categories/theory/>Theory</a><a class="tag" href=/tags/systems-programming/>Systems Programming</a><a class="tag" href=/tags/fuse/>FUSE</a><a class="tag" href=/tags/file-systems/>File Systems</a><a class="tag" href=/tags/procfs/>procfs</a></section></div><section class="article navigation"><p><a class="link" href="/posts/networking_basics/"><span class="li">&larr;</span>Networking basics</a></p><p><a class="link" href="/posts/pthreads/"><span class="li">&rarr;</span>pthreads in C</a></p></section></div><section id="footer" class="footer"><div class="footer-wrap">
    <p class="copyright">blog</p>
    <p class="powerby"><span>Powered by </span><a href="https://gohugo.io" 
        target="_blank">Hugo</a><span> and the </span><a href="https://themes.gohugo.io/hugo-notepadium/" 
        target="_blank">Notepadium</a></p>
</div></section></div>
</body>

</html>