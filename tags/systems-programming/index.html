<!DOCTYPE html>
<html lang="en"><meta charset="utf-8"><meta name="generator" content="Hugo 0.101.0" /><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<meta name="color-scheme" content="light dark">
<meta name="supported-color-schemes" content="light dark"><title>Systems Programming&nbsp;&ndash;&nbsp;George&#39;s Blog</title><link rel="stylesheet" href="/georgesims21.github.io/css/core.min.6391195f7c0920b53937f5eed2bfc37b11cb7bd13a9b537ad5c0ff9634c07539facf25b4d549fa7fff38dd1551201e55.css" integrity="sha384-Y5EZX3wJILU5N/Xu0r/DexHLe9E6m1N61cD/ljTAdTn6zyW01Un6f/843RVRIB5V"><link rel="alternate" type="application/rss+xml" href="/georgesims21.github.io/tags/systems-programming/index.xml" title="George's Blog" /><meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Systems Programming" /><body><section id="header">
    <div class="header wrap"><span class="header left-side"><a class="site home" href="/"><span class="site name">George's Blog</span></a></span>
        <span class="header right-side"><div class="nav wrap"><nav class="nav"><a class="nav item" href="/categories/">Categories</a><a class="nav item" href="/tags/">Tags</a><a class="nav item" href="/about">About</a><a class="nav item" href="https://gohugo%2eio/"target="_blank" rel="noopener noreferrer">Hugo</a></nav></div></span></div><div class="site slogan"><span class="title">100% JavaScript-free</span></div></section><section id="content"><section class="article header"><h1>Systems Programming</h1></section><ul class="note list"><li class="item"><a class="note" href="/georgesims21%2egithub%2eio/posts/64-bit-gcc_runtime_stack_usage/">
            <p class="note title">64-bit-GCC Runtime Stack Usage</p><p class="note content">CPU registers in 64-bit mode * rax * rbx * rbp * rsp first * rdi &lt;--+ * rsi | in 64-bit mode the first 6 parameters are placed in * rdx | these registers from rdi to r9 when calling a function, * rcx | any extra params are passed through the stack like in * r8 | 32-bit mode * r9 &lt;--+ last * r10-r15 Simple C program in assembly #include &lt;stdio.<span class="mldr">&mldr;</span></p></a><p class="note labels"><a class="category" href="/categories/theory/">Theory</a><a class="tag" href="/tags/c/">C</a><a class="tag" href="/tags/systems-programming/">Systems Programming</a><a class="tag" href="/tags/assembly/">Assembly</a></p></li><li class="item"><a class="note" href="/georgesims21%2egithub%2eio/posts/c_function_calls/">
            <p class="note title">C function calls (32-bit)</p><p class="note content">Each CPU has the following registers (64-bit in parantheses):
PC (IP): Instruction pointer - Points to next instruction for the CPU to execute SP (SP): Stack pointer - Points to the top of the stack FP (BP): Base pointer - Points to the stack frame of the current active function RVR (AX): Return value - Points to the function return value main() | int sub(int x, int y) { | { int a, b, c; | int u, v; a = 1; b = 2; c = 3; | u = 4; v = 5; c = sub(a, b); | return x+y+u+v; printf(&#34;c=%d\n&#34;, c); | } } | When a C program is envoked, the return address (current PC) is pushed onto the stack and then the value stored in the PC register is replaced with the function we wish the CPU to execute.<span class="mldr">&mldr;</span></p></a><p class="note labels"><a class="category" href="/categories/theory/">Theory</a><a class="tag" href="/tags/c/">C</a><a class="tag" href="/tags/systems-programming/">Systems Programming</a><a class="tag" href="/tags/assembly/">Assembly</a></p></li><li class="item"><a class="note" href="/georgesims21%2egithub%2eio/posts/fuse/">
            <p class="note title">FUSE</p><p class="note content">FUSE (filesystem in user space) [1] What is FUSE, and why use it? FUSE is an open source framework which allows you to build filesystems in user space, compared to the conventional kernel space route. Building in user space is said by many to not be suitable for production, and also that the overhead is too substantial to be of use. But this allows the programmer to work in a &lsquo;friendlier&rsquo; environment, gives a much larger toolset to work with and probably most importantly, it doesn&rsquo;t crash the system on a bug like kernel programming does.<span class="mldr">&mldr;</span></p></a><p class="note labels"><a class="category" href="/categories/theory/">Theory</a><a class="tag" href="/tags/systems-programming/">Systems Programming</a><a class="tag" href="/tags/fuse/">FUSE</a><a class="tag" href="/tags/file-systems/">File Systems</a></p></li><li class="item"><a class="note" href="/georgesims21%2egithub%2eio/posts/networking_basics/">
            <p class="note title">Networking basics</p><p class="note content">TCP (Transmission Control Protocol)/IP (Internet Protocol) is the backbone of the internet. There are 2 versions: IPv4 (32-bit addresses) and IPv6 (64-bit). The figure below shows the TCP/IP layers:
The top layer shows applications which use networking to transfer/collect data. They either use TCP or UDP (mentioned later). Data transfer at this level is only logical, the real transferring takes place at the bottom two layers (Internet and Link layers). This is where the data packets are divided into data frames for transmission over physical networks.<span class="mldr">&mldr;</span></p></a><p class="note labels"><a class="category" href="/categories/theory/">Theory</a><a class="tag" href="/tags/c/">C</a><a class="tag" href="/tags/systems-programming/">Systems Programming</a><a class="tag" href="/tags/networking/">Networking</a></p></li><li class="item"><a class="note" href="/georgesims21%2egithub%2eio/posts/procfs/">
            <p class="note title">procfs/sysfs</p><p class="note content">procfs and sysfs are both pseudo filesystems located in the root directory of the Unix FS heirarchy. They contain files which act as a window to the kernel and allows user-land processes to see and change important system information. Upon inspection (if you wrote the command $ ls -al /proc on a Unix system) you would notice that all files are 0 in size. This is due to the window aspect, one a user-land process reads/opens one of these files, it is at that moment the kernel writes that information to the file, hence the analogy.<span class="mldr">&mldr;</span></p></a><p class="note labels"><a class="category" href="/categories/theory/">Theory</a><a class="tag" href="/tags/systems-programming/">Systems Programming</a><a class="tag" href="/tags/fuse/">FUSE</a><a class="tag" href="/tags/file-systems/">File Systems</a><a class="tag" href="/tags/procfs/">procfs</a></p></li><li class="item"><a class="note" href="/georgesims21%2egithub%2eio/posts/socket_programming/">
            <p class="note title">Socket Programming (TCP)</p><p class="note content">The C socket API allows a developer to design and build a TCP/IP client/server program. To begin with a socket address structure is needed (&lt;sys/socket.h&gt;):
struct sockaddr_in { sa_family_t sin_family; // AF_INET for TCP/IP in_port_t sin_port; // port number struct in_addr sin_addr; // IP address }; struct in_addr { // internet address (in_addr) uint32_t s_addr; // IP address in network byte order }; for TCP/IP connections sin_family is always set to AF_INET, sin_port contains the port number (in network byte order) and finally sin_addr is the host IP address, also in network byte order.<span class="mldr">&mldr;</span></p></a><p class="note labels"><a class="category" href="/categories/theory/">Theory</a><a class="tag" href="/tags/c/">C</a><a class="tag" href="/tags/systems-programming/">Systems Programming</a><a class="tag" href="/tags/networking/">Networking</a><a class="tag" href="/tags/sockets/">Sockets</a></p></li></ul></section><section id="footer"><div class="footer-wrap">
    <p class="copyright">Â©2019 Notepadium.</p>
    <p class="powerby"><span>Powered&nbsp;by&nbsp;</span><a href="https://gohugo.io" 
        target="_blank" rel="noopener noreferrer">Hugo</a><span>&nbsp;&amp;&nbsp;</span><a href="https://themes.gohugo.io/hugo-notepadium/" 
        target="_blank" rel="noopener noreferrer">Notepadium</a>
<a href='https://ipv6-test.com/validate.php?url=referer'
  ><img src='https://ipv6-test.com/button-ipv6-80x15.png' 
        alt='ipv6 ready' title='ipv6 ready' border='0' 
/></a>
</p></div>
</section></body>

</html>